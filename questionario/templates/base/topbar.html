{% load static %}

<div class="topbar container">

  <nav>

    <div class="container-fluid d-flex align-items-center justify-content-between">
      <a class="link-topbar d-flex align-items-center" href="{% url 'indexSite' %}">
        
        <div class="d-flex align-items-center">
          <img id="logo_nav"src="{%static 'IMG/logoMegaForms-render.png' %}" width="50" alt="Logo MegaForms">
        
          <p class="fs-4" style="padding-left:16px;margin-bottom: 0px;">
            MegaForms
          </p>

        </div>

      </a>

      <div class="{% if not user.is_authenticated %}d-none{% endif %}" id="user_bar">
        <a id="menu-perfil">
          <img src="{{perfil.imagem.url}}" class="imgPerfil" title="{{perfil.nome}}">
        </a>
        <div class="d-none" id="lista-perfil">
          <ul>
            <li><a class="dropdown-item" href="#">Action</a></li>
            <li><a class="dropdown-item" href="#">Action two</a></li>
            <li><a class="dropdown-item" href="#">Action three</a></li>
          </ul>
        </div>
      </div>

      <div class="menu-topbar">

        <a class="link-topbar" href="{% url 'indexSite' %}">Início</a>
      
        <a class="link-topbar" href="{% url 'noticias' %}">Notícias</a>

        <a class="link-topbar" href="{% url 'sobre' %}">Sobre</a>

        {% if user.is_authenticated and temPermissaoBase%}

          <a class="link-topbar" href="{% url 'questionariosIndex' %}">Questionários</a>

          <a class="link-topbar" href="{% url 'relatoriosQuestionariosIndex' %}">Relatórios</a>

        {% endif %}

        <a class="link-topbar" href="{% url "repositorio" %}">Documentos</a>
        
        {% if user.is_authenticated %}
            <a class="link-topbar" type="button" id="botao-sair" href="{% url 'sair' %}?next={{request.path}}">
              <span class="p-3">
                Sair
              </span>
            </a>
        {% else %}
            <a class="link-topbar" type="button" id="botao-entrar"  href="{% url 'login' %}?next={{request.path}}">
              <span class="p-3">
                Entrar
              </span>
            </a>
        {% endif %}
      </div>

      
      <div class="menu-topbar-mobile justify-content-between">
        {% if not user.is_authenticated %}
        <a class="link-topbar-mobile" type="button" id="botao-entrar"  href="{% url 'login' %}?next={{request.path}}">
          <span class="p-3">
            Entrar
          </span>
        </a>
          
        {% else %}
          <div class="ml-1 {% if not user.is_authenticated %}d-none{% endif %}" id="user_bar-mobile">
            <a href="#">
              <img src="{{perfil.imagem.url}}" class="imgPerfil" title="{{perfil.nome}}">
            </a>
          </div>
        {% endif %}
        <a type="button" id="button-menu-mobile" data-bs-toggle="modal" data-bs-target="#topbar-mobile">
          <i class="fa-solid fa-bars fa-2xl"></i>
        </a>
        
        <!-- Modal Menu Mobile-->
        <div class="modal fade" id="topbar-mobile" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="topbar-mobileLabel" aria-hidden="true">
          <div class="modal-dialog">
            <div class="modal-content">
              <div class="modal-header">
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
              </div>
              <div class="modal-body d-flex flex-column justify-content-center">
                <a class="link-topbar" href="{% url 'indexSite' %}">Início</a>
              
                <a class="link-topbar" href="{% url 'noticias' %}">Notícias</a>
                
                <a class="link-topbar" href="{% url 'sobre' %}">Sobre</a>
                
                <a class="link-topbar" href="{% url "repositorio" %}">Documentos</a>
                
                {% comment %} {% if user.is_authenticated and temPermissaoBase%}

                  <a class="link-topbar" href="{% url 'questionariosIndex' %}">Questionários</a>
        
                  <a class="link-topbar" href="{% url 'relatoriosQuestionariosIndex' %}">Relatórios</a>
        
                {% endif %} {% endcomment %}

                {% if user.is_authenticated %}

                  <a class="link-topbar" href="{% url 'sair' %}?next={{request.path}}">Sair</a>

                {%endif%}
              </div>
            </div>
          </div>
        </div>
        
      </div>

    </div>

  </nav>

</div>
